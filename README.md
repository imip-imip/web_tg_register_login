## Модуль `models` 

### create_connection
Функция `create_connection` создает соединение с базой данных SQLite `users.db`. Она используется для выполнения всех операций с базой данных. Эта функция возвращает объект соединения, который затем используется для выполнения SQL-запросов.

### create_table
Функция `create_table` создает таблицу `users` в базе данных, если она еще не существует. Таблица содержит пять столбцов:
- `id`: уникальный идентификатор пользователя, генерируемый автоматически.
- `username`: имя пользователя, уникальное и не может быть пустым.
- `password`: хэшированный пароль пользователя.
- `anime`: любимое аниме пользователя.
- `film`: любимый фильм пользователя.

### insert_user
Функция `insert_user` добавляет нового пользователя в таблицу `users`. Она принимает четыре параметра: `username`, `password`, `anime` и `film`. Пароль хэшируется с использованием функции `generate_password_hash` из библиотеки `werkzeug.security` для обеспечения безопасности. Если добавление пользователя прошло успешно, функция возвращает `True`; если имя пользователя уже существует в базе данных, возвращается `False`.

### get_user
Функция `get_user` извлекает информацию о пользователе из таблицы `users` по имени пользователя. Она принимает два параметра: `username` и `password`. Если пользователь с указанным именем существует и пароль верен (проверяется с использованием функции `check_password_hash` из библиотеки `werkzeug.security`), функция возвращает данные пользователя. В противном случае возвращается `None`.

## Модуль `pdf_generator`

### generate_pdf
Функция `generate_pdf` создает PDF-документ с информацией о пользователе. Она принимает три параметра: `username`, `favorite_anime` и `favorite_movie`. PDF-документ создается с использованием библиотеки `reportlab` и сохраняется под именем `{username}'s resume.pdf`.

### send_pdf
Функция `send_pdf` отправляет созданный PDF-документ пользователю через Telegram Bot. Она извлекает данные пользователя из базы данных и вызывает функцию `generate_pdf` для создания PDF-документа. Затем документ отправляется пользователю через метод `send_document` библиотеки `telebot`.

## Модуль `routes`

### Flask-приложение
Flask-приложение содержит несколько маршрутов для взаимодействия с пользователями.

- `/`: домашняя страница, отображающаяся с использованием шаблона `home.html`. Если пользователь авторизован, сессия содержит информацию о пользователе.
  
- `/logout`: маршрут для выхода пользователя из сессии. Удаляет данные пользователя из сессии и перенаправляет на домашнюю страницу.

- `/info_table`: маршрут для отображения информации о текущем пользователе. Извлекает информацию из базы данных и отображает ее с использованием шаблона `user_info.html`.

- `/register`: маршрут для регистрации нового пользователя. Обрабатывает GET-запросы для отображения регистрационной формы и POST-запросы для добавления нового пользователя в базу данных. Если регистрация прошла успешно, пользователь перенаправляется на страницу входа.

- `/login`: маршрут для входа пользователя в систему. Обрабатывает GET-запросы для отображения формы входа и POST-запросы для аутентификации пользователя. Если аутентификация прошла успешно, данные пользователя сохраняются в сессии, и он перенаправляется на страницу с информацией о пользователе.

## Модуль `telegram_bot`

### telegram_bot
Функция `telegram_bot` инициализирует Telegram Bot и определяет его поведение.

- `start`: обрабатывает команду `/start` и отправляет приветственное сообщение с кнопками.
  
- `help_btn`: обрабатывает команду `/help` и отправляет сообщение с информацией о доступных кнопках.

- `info_command`: обрабатывает команду `/info`. Извлекает информацию о пользователе по указанным имени пользователя и паролю. Если пользователь найден, бот отправляет информацию о пользователе. В противном случае отправляется сообщение об ошибке.

- `send_pdf_command`: обрабатывает команду `/sendpdf`. Извлекает имя пользователя из команды, генерирует PDF-документ с информацией о пользователе и отправляет его через бот.

- `register_telegram`: обрабатывает команду `/register`. Извлекает имя пользователя, пароль и любимое аниме из команды, добавляет пользователя в базу данных и отправляет соответствующее сообщение.

- `text_message`: обрабатывает текстовые сообщения. Если сообщение содержит слово "привіт", бот отвечает приветственным сообщением.

- `callback_query`: обрабатывает нажатия на кнопки. В зависимости от нажатой кнопки, бот отправляет соответствующее сообщение.

### register_user
Функция `register_user` добавляет нового пользователя в базу данных через Telegram. Она принимает три параметра: `username`, `password` и `anime`. Пароль хэшируется перед сохранением в базу данных. Если регистрация прошла успешно, возвращается сообщение о успешной регистрации, в противном случае возвращается сообщение об ошибке.

Этот проект объединяет Flask-приложение, Telegram Bot и SQLite базу данных для создания полнофункционального веб-приложения с поддержкой взаимодействия через Telegram. Пользователи могут регистрироваться, авторизовываться, просматривать и получать информацию в формате PDF через веб-интерфейс или Telegram.

## Модуль `run`

Модуль run запускает проект. Он вызывает функцию create_table для инициализации базы данных и запускает Flask-приложение и Telegram Bot в отдельных потоках. Это позволяет одновременно обрабатывать веб-запросы и команды Telegram.
